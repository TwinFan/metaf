<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Metaf Usage Examples</title>
  <link rel="stylesheet" type="text/css" href="../style.css">
  <style type="text/css">
    body {text-align:center;}
  </style>
  <script>

    function convertToJson() {
      var inputStr = document.getElementById("input").value;
      var result = Module.ccall('toJson',     // name of C function 
                                'string',     // return type
                                ['string'],   // argument types
                                [inputStr]);  // arguments
      Module.ccall('freeMemory', null, null, null);

      //Prettify the result
      resultObj = JSON.parse(result);
      const spacing = 2;
      result = JSON.stringify(resultObj, null, spacing);

      document.getElementById("result").value = result;
    };

    function setSampleInput(){
      var sampleMetarStr = 'UKLL 241430Z 31004MPS 3100 -SHSN BKN007 BKN016CB M01/M02 Q1011 R31/290055 NOSIG=';
      if (document.getElementById("input").value.length == 0) {
        document.getElementById("input").value = sampleMetarStr;
      }
    }

  </script>
  {{{ SCRIPT }}}
  </head>
  <body onload="setSampleInput()">
    <ul class="navbar">
    <li class="navitem"><a href="../index.html">About</a></li>
    <li class="navitem"><a href="https://gitlab.com/nnaumenko/metaf/" target="_blank">Repository</a></li>
    <li class="navitem navactive"><a href="../examples.html">Examples</a></li>
    <li class="navitem"><a href="../docs/index.html" target="_blank">Documentation</a></li>
  </ul>
  <div class="content">
    <h1>Convert METAR & TAF to JSON</h1>
  		Enter or paste METAR or TAF here:<br>
      <textarea id="input" rows="8" cols="80" onInput="convertToJson()"></textarea><br>
      <br><br>
  		Conversion result:<br>
      <textarea id="result" rows="8" cols="80" readonly></textarea><br>
 </body>
</html>